# Документация API

## Ресурс Handbooks
### Описание ресурса 
Содержит информацию о справочниках последних версий. Информация включает наименование, версию и дату 
начала действия для каждого справочника.
### Конечная точка и методы
```
Endpoints

GET handbooks/

Получить список справочников последних версий.
```

## Ресурс Handbooks_all_versions
### Описание ресурса 
Содержит информацию о справочниках всевозможных версий. Информация включает наименование, версию и дату 
начала действия для каждого справочника.
### Конечная точка и методы
```
Endpoints

GET handbook_all_versions/

Получить справочники всевозможных версий.
```

## Ресурс Handbook_for_date
### Описание ресурса 
Содержит информацию о справочниках, актуальных на определенную дату. Информация включает наименование, версию и дату 
начала действия для каждого справочника.
### Конечная точка и методы
```
Endpoints

GET handbook_for_date/{date}

Получить справочники, актуальные на дату date.
```
### Параметры path
```
handbook_for_date/{date}
```
| Параметр URL      | Описание параметра              |
| --------------    | ---------------------------     |
| date              | Дата в формате 'YYYY-MM-DD'     |

### Пример запроса
GET-запрос: в качестве адреса должен быть указан URL в формате [base]/catalog/handbook-for_date/{date}. Например,
```
[base]/catalog/handbook-for_date/2021-03-20
```
### Пример и схема ответа
В качестве ответа на запрос из примера будет получено:
```
{
    "count": 8,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 14,
            "title": "Заболевания желудка",
            "short_title": "Желудок",
            "description": "Краткая информация о распространенных заболеваниях желудка.",
            "version": "1.2",
            "date": "2021-03-19"
        },
    ...
}
```
Общие параметры ответа:

| №   | Параметр    | Тип      | Описание                         |
| --- | ----------- | -------- | -------------------------------- |
|1.   | count       | id       | Количество элементов ответа      |
|2.   | next        | string   | Ссылка на следующую страницу     |
|3.   | previous    | string   | Ссылка на предыдущую страницу    |
|4.   | results     | string   | Список возвращаемых элементов    |

Параметры `results`:

| №   | Параметр    | Тип      | Описание                         |
| --- | ----------- | -------- | -------------------------------- |
|1.   | id          | id       | Идентификатор справочника        |
|2.   | title       | string   | Наименование справочника         |
|3.   | short_title | string   | Краткое наименование справочника |
|4.   | description | string   | Описание справочника             |
|5.   | version     | string   | Версия справочника               |
|6.   | date        | datetime | Дата начала действия справочника |

## Ресурс Elements
### Описание ресурса 
Содержит информацию об элементах определенного справочника. Информация включает код и значение для каждого элемента 
справочника.
### Конечная точка и методы
```
Endpoints

GET elements/?handbook=id

Получить элементы справочника с идентификатором, равным id, текущей версии.

GET elements/?handbook=id&version=value

Получить элементы справочника с идентификатором, равным id, и версией, равной value.
```
### Параметры строки запроса
| Параметр      | Описание параметра        | Формат параметра                    |
| ------------- | ------------------------- | ----------------------------------- |
| handbook      | Идентификатор справочника | Целое число                         |
| version       | Версия справочника        | Два целых числа, разделенных запятой| 

### Пример запроса
GET-запрос: в качестве адреса должен быть указан URL в формате [base]/catalog/elements/?handbook=id или 
[base]/catalog/elements/?handbook=id&version=value. Например,
```
[base]/catalog/elements/?handbook=5&version=1.1
```
### Пример и схема ответа
В качестве ответа на запрос из примера будет получено:
```
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 13,
            "code": "100-1",
            "value": "Экзема"
        },
        {
            "id": 14,
            "code": "100-2",
            "value": "Чесотка"
        }
    ]
}
```
Общие параметры ответа:

| №   | Параметр    | Тип      | Описание                         |
| --- | ----------- | -------- | -------------------------------- |
|1.   | count       | id       | Количество элементов ответа      |
|2.   | next        | string   | Ссылка на следующую страницу     |
|3.   | previous    | string   | Ссылка на предыдущую страницу    |
|4.   | results     | string   | Список возвращаемых элементов    |

Параметры `results`:

| №   | Параметр    | Тип      | Описание               |
| --- | ----------- | -------- | ---------------------- |
|1.   | id          | id       | Идентификатор элемента |
|2.   | code        | string   | Код элемента           |
|3.   | value       | string   | Значение элемента      |

В случае, если справочник с указанным идентификатором не найден, ответом на запрос будет являться сообщение следующего 
вида:
```
{
    "detail": "The requested handbook was not found."
}
```

В случае, если формат передаваемых параметров не соответствует нужному шаблону, ответом на запрос будет являться 
одно из сообщений:
```
{
    "detail": "Your request contain invalid handbook. You must specify the handbook identifier as an integer."
}
```

```
{
    "detail": "Your request contain invalid handbook version. You must specify the handbook version as two integers separated a dot."
}
```

## Ресурс Elements_by_title
### Описание ресурса 
Содержит информацию об элементах определенного справочника. Информация включает код и значение для каждого элемента 
справочника.
### Конечная точка и методы
```
Endpoints

GET elements_by_title/?handbook=title

Получить элементы справочника с наименованием title текущей версии.

GET elements_by_title/?handbook=title&version=value

Получить элементы справочника с наименованием title и версией, равной value.
```
### Параметры строки запроса
| Параметр      | Описание параметра        | Формат параметра                    |
| ------------- | ------------------------- | ----------------------------------- |
| handbook      | Наименование справочника  | Строка                       |
| version       | Версия справочника        | Два целых числа, разделенных запятой| 

### Пример запроса
GET-запрос: в качестве адреса должен быть указан URL в формате [base]/catalog/elements_by_title/?handbook=title или 
[base]/catalog/elements_by_title/?handbook=title&version=value. Например,
```
[base]/catalog/elements_by_title/?handbook=Глазные%20заболевания&version=1.2
```
### Пример и схема ответа
В качестве ответа на запрос из примера будет получено:
```
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 22,
            "code": "101-1",
            "value": "Халязион"
        },
        {
            "id": 29,
            "code": "101-2",
            "value": "Катаракта"
        }
    ]
}
```
Общие параметры ответа:

| №   | Параметр    | Тип      | Описание                         |
| --- | ----------- | -------- | -------------------------------- |
|1.   | count       | id       | Количество элементов ответа      |
|2.   | next        | string   | Ссылка на следующую страницу     |
|3.   | previous    | string   | Ссылка на предыдущую страницу    |
|4.   | results     | string   | Список возвращаемых элементов    |

Параметры `results`:

| №   | Параметр    | Тип      | Описание               |
| --- | ----------- | -------- | ---------------------- |
|1.   | id          | id       | Идентификатор элемента |
|2.   | code        | string   | Код элемента           |
|3.   | value       | string   | Значение элемента      |

В случае, если справочник с указанным идентификатором не найден, ответом на запрос будет являться сообщение следующего 
вида:
```
{
    "detail": "The requested handbook was not found."
}
```

В случае, если формат передаваемых параметров не соответствует нужному шаблону, ответом на запрос будет являться 
одно из сообщений:
```
{
    "detail": "Your request contain invalid handbook. You must specify the handbook identifier as an integer."
}
```

```
{
    "detail": "Your request contain invalid handbook version. You must specify the handbook version as two integers separated a dot."
}
```

